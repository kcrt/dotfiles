<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html>
<head>
<meta http-equiv="content-type" content="text/html; charset=UTF-8">
<title>~/etc/sheet/prog/hash.js.html</title>
<meta name="Generator" content="Vim/8.1">
<meta name="plugin-version" content="vim8.1_v1">
<meta name="syntax" content="javascript.jsx">
<meta name="settings" content="use_css,pre_wrap,no_foldcolumn,expand_tabs,prevent_copy=">
<meta name="colorscheme" content="morning">
<style type="text/css">
<!--
pre { white-space: pre-wrap; font-family: monospace; color: #000000; background-color: #e5e5e5; }
body { font-family: monospace; color: #000000; background-color: #e5e5e5; }
* { font-size: 1em; }
.javascriptRainbow_lv0_o2 { color: #3a5fcd; }
.javascriptRainbow_lv0_p2 { color: #3a5fcd; }
.Comment { color: #0000ff; }
.Constant { color: #ff00ff; background-color: #f2f2f2; padding-bottom: 1px; }
.Special { color: #6a5acd; background-color: #f2f2f2; padding-bottom: 1px; }
.Identifier { color: #008b8b; }
.Statement { color: #a52a2a; font-weight: bold; }
.Type { color: #2e8b57; font-weight: bold; }
.Normal { color: #000000; background-color: #e5e5e5; padding-bottom: 1px; }
-->
</style>
</head>
<body>
<pre id='vimCodeElement'>
<span class="Constant">&quot;use strict&quot;</span><span class="Statement">;</span>

<span class="Comment">// ECMAScriptには、歴史的に連想配列の代わりとしてよく使用されてきたObjectと、新しく使用できるMap [[2015]]がある。</span>
<span class="Comment">// Objectの方がよく使用されているが、今後のことを考えてMapの使用になれていくことをおすすめする。</span>

<span class="Identifier">let</span> personobj = <span class="Identifier">{</span>
    <span class="Statement">name</span>: <span class="Constant">&quot;Kyohei, Takahashi&quot;</span><span class="Normal">,</span>
    <span class="Statement">nickname</span>: <span class="Constant">&quot;kcrt&quot;</span><span class="Normal">,</span>
    <span class="Statement">addr</span>: <span class="Constant">&quot;kcrt@kcrt.net&quot;</span><span class="Normal">,</span>
    <span class="Statement">&quot;age&quot;</span>: <span class="Constant">34</span>   <span class="Comment">// keyに&quot;&quot;は会ってもなくても良い</span>
<span class="Identifier">}</span><span class="Statement">;</span>
<span class="Identifier">let</span> personmap = <span class="Identifier">new</span> <span class="Type">Map</span><span class="Normal">(</span><span class="Identifier">[</span>
    <span class="Identifier">[</span><span class="Constant">&quot;name&quot;</span><span class="Normal">,</span> <span class="Constant">&quot;Kyohei, Takahashi&quot;</span><span class="Identifier">]</span><span class="Normal">,</span>
    <span class="Identifier">[</span><span class="Constant">&quot;nickname&quot;</span><span class="Normal">,</span> <span class="Constant">&quot;kcrt&quot;</span><span class="Identifier">]</span><span class="Normal">,</span>
    <span class="Identifier">[</span><span class="Constant">&quot;addr&quot;</span><span class="Normal">,</span> <span class="Constant">&quot;kcrt@kcrt.net&quot;</span><span class="Identifier">]</span><span class="Normal">,</span>
    <span class="Identifier">[</span><span class="Constant">&quot;age&quot;</span><span class="Normal">,</span> <span class="Constant">34</span><span class="Identifier">]</span>
<span class="Identifier">]</span><span class="Normal">)</span><span class="Statement">;</span>
<span class="Type">console</span>.<span class="Statement">log</span><span class="Normal">(</span>personobj<span class="Normal">)</span><span class="Statement">;</span>
<span class="Type">console</span>.<span class="Statement">log</span><span class="Normal">(</span>personmap<span class="Normal">)</span><span class="Statement">;</span>

<span class="Comment">// 取得</span>
<span class="Type">console</span>.<span class="Statement">log</span><span class="Normal">(</span>personobj.nickname<span class="Normal">)</span><span class="Statement">;</span>     <span class="Comment">// どちらでも良いが</span>
<span class="Type">console</span>.<span class="Statement">log</span><span class="Normal">(</span>personobj[<span class="Constant">&quot;nickname&quot;</span>]<span class="Normal">)</span><span class="Statement">;</span>  <span class="Comment">// .が好まれる</span>
<span class="Type">console</span>.<span class="Statement">log</span><span class="Normal">(</span>personmap.<span class="Statement">get</span><span class="Normal">(</span><span class="Constant">&quot;nickname&quot;</span><span class="Normal">))</span><span class="Statement">;</span>
<span class="Identifier">const</span> <span class="javascriptRainbow_lv0_p2">{</span>addr<span class="javascriptRainbow_lv0_o2">,</span> age<span class="javascriptRainbow_lv0_o2">,</span> nokey=<span class="Constant">&quot;default&quot;</span><span class="javascriptRainbow_lv0_p2">}</span> = personobj <span class="Comment">//Destructruring Assignment [[2015]]</span>


<span class="Comment">// 追加</span>
personobj.birthday = <span class="Constant">&quot;1984-09-24&quot;</span><span class="Statement">;</span>
personmap.<span class="Statement">set</span><span class="Normal">(</span><span class="Constant">&quot;birthday&quot;</span><span class="Normal">,</span> <span class="Constant">&quot;1984-09-24&quot;</span><span class="Normal">)</span><span class="Statement">;</span>

<span class="Comment">// 削除</span>
<span class="Identifier">delete</span> personobj.age<span class="Statement">;</span>
personmap.<span class="Statement">delete</span><span class="Normal">(</span><span class="Constant">&quot;age&quot;</span><span class="Normal">)</span><span class="Statement">;</span>
<span class="Type">console</span>.<span class="Statement">log</span><span class="Normal">(</span><span class="Constant">&quot;after delete:&quot;</span><span class="Normal">,</span> personobj<span class="Normal">)</span><span class="Statement">;</span>
<span class="Type">console</span>.<span class="Statement">log</span><span class="Normal">(</span><span class="Constant">&quot;after delete:&quot;</span><span class="Normal">,</span> personmap<span class="Normal">)</span><span class="Statement">;</span>

<span class="Comment">// 要素数</span>
<span class="Type">console</span>.<span class="Statement">log</span><span class="Normal">(</span><span class="Type">Object</span>.<span class="Statement">keys</span><span class="Normal">(</span>personobj<span class="Normal">)</span>.<span class="Statement">length</span><span class="Normal">)</span>
<span class="Type">console</span>.<span class="Statement">log</span><span class="Normal">(</span>personmap.<span class="Statement">size</span><span class="Normal">)</span><span class="Statement">;</span>

<span class="Comment">// キー存在確認</span>
<span class="Type">console</span>.<span class="Statement">log</span><span class="Normal">(</span>personobj.nokey<span class="Normal">)</span>    <span class="Comment">// keyがなければundefined</span>
<span class="Type">console</span>.<span class="Statement">log</span><span class="Normal">(</span><span class="Constant">&quot;nokey&quot;</span> <span class="Identifier">in</span> personobj<span class="Normal">)</span>
<span class="Type">console</span>.<span class="Statement">log</span><span class="Normal">(</span><span class="Constant">&quot;name&quot;</span> <span class="Identifier">in</span> personobj<span class="Normal">)</span>

personmap.<span class="Statement">has</span><span class="Normal">(</span><span class="Constant">&quot;nokey&quot;</span><span class="Normal">)</span>  <span class="Comment">// =&gt; T/F</span>

<span class="Comment">// 結合</span>
<span class="Identifier">let</span> obj1 = <span class="Identifier">{</span><span class="Statement">a</span>: <span class="Constant">1</span><span class="Normal">,</span> <span class="Statement">b</span>: <span class="Constant">2</span><span class="Identifier">}</span><span class="Statement">;</span>
<span class="Identifier">let</span> obj2 = <span class="Identifier">{</span><span class="Statement">a</span>: <span class="Constant">3</span><span class="Normal">,</span> <span class="Statement">d</span>: <span class="Constant">4</span><span class="Identifier">}</span><span class="Statement">;</span>
<span class="Type">Object</span>.<span class="Statement">assign</span><span class="Normal">(</span>obj1<span class="Normal">,</span> obj2<span class="Normal">)</span>   <span class="Comment">// obj1 += obj2</span>
<span class="Identifier">let</span> newobj = <span class="Type">Object</span>.<span class="Statement">assign</span><span class="Normal">(</span><span class="Identifier">{}</span><span class="Normal">,</span> obj1<span class="Normal">,</span> obj2<span class="Normal">)</span>   <span class="Comment">// newobj = obj1 + obj2</span>
<span class="Type">console</span>.<span class="Statement">log</span><span class="Normal">(</span><span class="Constant">&quot;assign: &quot;</span><span class="Normal">,</span> newobj<span class="Normal">)</span>
<span class="Type">console</span>.<span class="Statement">log</span><span class="Normal">(</span><span class="Constant">&quot;assign: &quot;</span><span class="Normal">,</span> obj1<span class="Normal">)</span>

<span class="Identifier">let</span> map1 = <span class="Identifier">new</span> <span class="Type">Map</span><span class="Normal">(</span><span class="Identifier">[[</span><span class="Constant">&quot;a&quot;</span><span class="Normal">,</span> <span class="Constant">1</span><span class="Identifier">]</span><span class="Normal">,</span> <span class="Identifier">[</span><span class="Constant">&quot;b&quot;</span><span class="Normal">,</span> <span class="Constant">2</span><span class="Identifier">]]</span><span class="Normal">)</span><span class="Statement">;</span>
<span class="Identifier">let</span> map2 = <span class="Identifier">new</span> <span class="Type">Map</span><span class="Normal">(</span><span class="Identifier">[[</span><span class="Constant">&quot;a&quot;</span><span class="Normal">,</span> <span class="Constant">3</span><span class="Identifier">]</span><span class="Normal">,</span> <span class="Identifier">[</span><span class="Constant">&quot;d&quot;</span><span class="Normal">,</span> <span class="Constant">4</span><span class="Identifier">]]</span><span class="Normal">)</span><span class="Statement">;</span>
<span class="Identifier">let</span> newmap = <span class="Identifier">new</span> <span class="Type">Map</span><span class="Normal">(</span><span class="Identifier">[</span>...map1<span class="Normal">,</span> ...map2<span class="Identifier">]</span><span class="Normal">)</span><span class="Statement">;</span>
<span class="Type">console</span>.<span class="Statement">log</span><span class="Normal">(</span>newmap<span class="Normal">)</span><span class="Statement">;</span>

<span class="Comment">// 走査</span>
<span class="Statement">for</span> <span class="Normal">(</span><span class="Identifier">let</span> <span class="Identifier">[</span>key<span class="Normal">,</span> value<span class="Identifier">]</span> <span class="Statement">of</span> <span class="Type">Object</span>.<span class="Statement">entries</span><span class="Normal">(</span>personobj<span class="Normal">))</span>
    <span class="Type">console</span>.<span class="Statement">log</span><span class="Normal">(</span><span class="Constant">`</span><span class="Statement">${</span>key<span class="Statement">}</span><span class="Constant"> is </span><span class="Statement">${</span>value<span class="Statement">}</span><span class="Constant">`</span><span class="Normal">)</span><span class="Statement">;</span>
<span class="Statement">for</span> <span class="Normal">(</span><span class="Identifier">let</span> key <span class="Statement">of</span> <span class="Type">Object</span>.<span class="Statement">keys</span><span class="Normal">(</span>personobj<span class="Normal">))</span>
    <span class="Type">console</span>.<span class="Statement">log</span><span class="Normal">(</span><span class="Constant">`</span><span class="Statement">${</span>key<span class="Statement">}</span><span class="Constant"> is </span><span class="Statement">${</span>personobj[key]<span class="Statement">}</span><span class="Constant">`</span><span class="Normal">)</span><span class="Statement">;</span>
<span class="Statement">for</span> <span class="Normal">(</span><span class="Identifier">let</span> value <span class="Statement">of</span> <span class="Type">Object</span>.<span class="Statement">values</span><span class="Normal">(</span>personobj<span class="Normal">))</span>
    <span class="Type">console</span>.<span class="Statement">log</span><span class="Normal">(</span><span class="Constant">`</span><span class="Statement">${</span>value<span class="Statement">}</span><span class="Constant">`</span><span class="Normal">)</span><span class="Statement">;</span>
<span class="Type">Object</span>.<span class="Statement">entries</span><span class="Normal">(</span>personobj<span class="Normal">)</span>.<span class="Statement">forEach</span><span class="Normal">((</span><span class="Identifier">[</span><span class="Special">key</span><span class="Normal">,</span><span class="Special"> value</span><span class="Identifier">]</span><span class="Normal">)</span> <span class="Statement">=&gt;</span> <span class="Identifier">{</span>  <span class="Comment">//[[2015]]</span>
    <span class="Type">console</span>.<span class="Statement">log</span><span class="Normal">(</span><span class="Constant">`</span><span class="Statement">${</span>key<span class="Statement">}</span><span class="Constant"> is </span><span class="Statement">${</span>value<span class="Statement">}</span><span class="Constant">`</span><span class="Normal">)</span><span class="Statement">;</span>
<span class="Identifier">}</span><span class="Normal">)</span><span class="Statement">;</span>

<span class="Statement">for</span> <span class="Normal">(</span><span class="Identifier">let</span> <span class="Identifier">[</span>key<span class="Normal">,</span> value<span class="Identifier">]</span> <span class="Statement">of</span> personmap<span class="Normal">)</span>
    <span class="Type">console</span>.<span class="Statement">log</span><span class="Normal">(</span><span class="Constant">`</span><span class="Statement">${</span>key<span class="Statement">}</span><span class="Constant"> is </span><span class="Statement">${</span>value<span class="Statement">}</span><span class="Constant">`</span><span class="Normal">)</span><span class="Statement">;</span>
<span class="Comment">// .keys(), .values()による走査は可能</span>
personmap.<span class="Statement">forEach</span><span class="Normal">((</span><span class="Special">value</span><span class="Normal">,</span><span class="Special"> key</span><span class="Normal">)</span> <span class="Statement">=&gt;</span> <span class="Identifier">{</span> <span class="Comment">// 順番[[注意]]</span>
    <span class="Type">console</span>.<span class="Statement">log</span><span class="Normal">(</span><span class="Constant">`</span><span class="Statement">${</span>key<span class="Statement">}</span><span class="Constant"> is=&gt; </span><span class="Statement">${</span>value<span class="Statement">}</span><span class="Constant">`</span><span class="Normal">)</span><span class="Statement">;</span>
<span class="Identifier">}</span><span class="Normal">)</span><span class="Statement">;</span>




<span class="Comment">// node helloworld.js で実行</span>
</pre>
</body>
</html>
<!-- vim: set foldmethod=manual : -->
