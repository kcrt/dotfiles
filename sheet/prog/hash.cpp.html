<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html>
<head>
<meta http-equiv="content-type" content="text/html; charset=UTF-8">
<title>~/etc/sheet/prog/hash.cpp.html</title>
<meta name="Generator" content="Vim/8.1">
<meta name="plugin-version" content="vim8.1_v1">
<meta name="syntax" content="cpp">
<meta name="settings" content="use_css,pre_wrap,no_foldcolumn,expand_tabs,prevent_copy=">
<meta name="colorscheme" content="morning">
<style type="text/css">
<!--
pre { white-space: pre-wrap; font-family: monospace; color: #000000; background-color: #e5e5e5; }
body { font-family: monospace; color: #000000; background-color: #e5e5e5; }
* { font-size: 1em; }
.cppRainbow_lv0_o0 { color: #3a5fcd; }
.cppRainbow_lv1_p1 { color: #cd6600; }
.cppRainbow_lv2_o1 { color: #43cd80; }
.cppRainbow_lv2_p1 { color: #43cd80; }
.cppRainbow_lv2_p2 { color: #43cd80; }
.Comment { color: #0000ff; }
.Constant { color: #ff00ff; background-color: #f2f2f2; padding-bottom: 1px; }
.Statement { color: #a52a2a; font-weight: bold; }
.PreProc { color: #a020f0; }
.Type { color: #2e8b57; font-weight: bold; }
.cppRainbow_lv0_p0 { color: #3a5fcd; }
.cppRainbow_lv1_o0 { color: #cd6600; }
.cppRainbow_lv1_p0 { color: #cd6600; }
.cppRainbow_lv2_o0 { color: #43cd80; }
.cppRainbow_lv2_p0 { color: #43cd80; }
.cppRainbow_lv0_o2 { color: #3a5fcd; }
.cppRainbow_lv0_p2 { color: #3a5fcd; }
.cppRainbow_lv1_o2 { color: #cd6600; }
.cppRainbow_lv1_p2 { color: #cd6600; }
.cppRainbow_lv2_o2 { color: #43cd80; }
-->
</style>
</head>
<body>
<pre id='vimCodeElement'>
<span class="PreProc">#include </span><span class="Constant">&lt;iostream&gt;</span>
<span class="PreProc">#include </span><span class="Constant">&lt;map&gt;</span>
<span class="PreProc">#include </span><span class="Constant">&lt;string&gt;</span>

<span class="Statement">using</span> <span class="Type">namespace</span> std;

<span class="Type">template</span>&lt;<span class="Type">class</span> T&gt; <span class="Type">void</span> print<span class="cppRainbow_lv0_p0">(</span>map&lt;string<span class="cppRainbow_lv0_o0">,</span> T&gt;&amp; m<span class="cppRainbow_lv0_p0">)</span><span class="cppRainbow_lv0_p2">{</span>
    <span class="Statement">for</span> <span class="cppRainbow_lv1_p0">(</span><span class="Type">const</span> <span class="Type">auto</span>&amp; <span class="cppRainbow_lv2_p1">[</span>key<span class="cppRainbow_lv2_o1">,</span> value<span class="cppRainbow_lv2_p1">]</span> : m<span class="cppRainbow_lv1_p0">)</span><span class="cppRainbow_lv1_p2">{</span> <span class="Comment">// [[C++17]]</span>
        cout &lt;&lt; key &lt;&lt; <span class="Constant">&quot;: &quot;</span> &lt;&lt; value &lt;&lt; endl;
    <span class="cppRainbow_lv1_p2">}</span>
<span class="cppRainbow_lv0_p2">}</span>
<span class="Type">int</span> main<span class="cppRainbow_lv0_p0">(</span><span class="Type">int</span> argc<span class="cppRainbow_lv0_o0">,</span> <span class="Type">char</span>** argv<span class="cppRainbow_lv0_p0">)</span><span class="cppRainbow_lv0_p2">{</span>

    map&lt;string<span class="cppRainbow_lv0_o2">,</span> string&gt; person<span class="cppRainbow_lv1_p2">{</span>
        <span class="cppRainbow_lv2_p2">{</span><span class="Constant">&quot;name&quot;</span><span class="cppRainbow_lv2_o2">,</span> <span class="Constant">&quot;Kyohei, Takahashi&quot;</span><span class="cppRainbow_lv2_p2">}</span><span class="cppRainbow_lv1_o2">,</span>
        <span class="cppRainbow_lv2_p2">{</span><span class="Constant">&quot;nickname&quot;</span><span class="cppRainbow_lv2_o2">,</span> <span class="Constant">&quot;kcrt&quot;</span><span class="cppRainbow_lv2_p2">}</span><span class="cppRainbow_lv1_o2">,</span>
        <span class="cppRainbow_lv2_p2">{</span><span class="Constant">&quot;addr&quot;</span><span class="cppRainbow_lv2_o2">,</span> <span class="Constant">&quot;kcrt@kcrt.net&quot;</span><span class="cppRainbow_lv2_p2">}</span><span class="cppRainbow_lv1_o2">,</span>
        <span class="cppRainbow_lv2_p2">{</span><span class="Constant">&quot;age&quot;</span><span class="cppRainbow_lv2_o2">,</span> <span class="Constant">&quot;34&quot;</span><span class="cppRainbow_lv2_p2">}</span>
    <span class="cppRainbow_lv1_p2">}</span>;
    <span class="Comment">// この初期化は[[C++11]]から</span>
    print<span class="cppRainbow_lv1_p0">(</span>person<span class="cppRainbow_lv1_p0">)</span>;

    <span class="Comment">// 取得</span>
    cout &lt;&lt; person<span class="cppRainbow_lv1_p1">[</span><span class="Constant">&quot;nickname&quot;</span><span class="cppRainbow_lv1_p1">]</span> &lt;&lt; endl;
    cout &lt;&lt; person<span class="cppRainbow_lv1_p1">[</span><span class="Constant">&quot;nokey&quot;</span><span class="cppRainbow_lv1_p1">]</span> &lt;&lt; endl;<span class="Comment">// 存在しない場合はデフォルト値で作られてしまう</span>
<span class="Statement">try</span><span class="cppRainbow_lv1_p2">{</span>
    cout &lt;&lt; person.at<span class="cppRainbow_lv2_p0">(</span><span class="Constant">&quot;nokey2&quot;</span><span class="cppRainbow_lv2_p0">)</span> &lt;&lt; endl; <span class="Comment">// out_of_range[[ERROR]]</span>
<span class="cppRainbow_lv1_p2">}</span><span class="Statement">catch</span> <span class="cppRainbow_lv1_p0">(</span>...<span class="cppRainbow_lv1_p0">)</span><span class="cppRainbow_lv1_p2">{</span>
    cout &lt;&lt; <span class="Constant">&quot;Exception&quot;</span> &lt;&lt; endl;
<span class="cppRainbow_lv1_p2">}</span>

    <span class="Comment">// 追加</span>
    person<span class="cppRainbow_lv1_p1">[</span><span class="Constant">&quot;birthday&quot;</span><span class="cppRainbow_lv1_p1">]</span> = <span class="Constant">&quot;1984-09-24&quot;</span>;

    person.insert<span class="cppRainbow_lv1_p0">(</span>make_pair<span class="cppRainbow_lv2_p0">(</span><span class="Constant">&quot;A&quot;</span><span class="cppRainbow_lv2_o0">,</span> <span class="Constant">&quot;a&quot;</span><span class="cppRainbow_lv2_p0">)</span><span class="cppRainbow_lv1_p0">)</span>;
    person.insert<span class="cppRainbow_lv1_p0">(</span>make_pair<span class="cppRainbow_lv2_p0">(</span><span class="Constant">&quot;A&quot;</span><span class="cppRainbow_lv2_o0">,</span> <span class="Constant">&quot;b&quot;</span><span class="cppRainbow_lv2_p0">)</span><span class="cppRainbow_lv1_p0">)</span>; <span class="Comment">// insertはすでにキーがあると上書きしない [[注意]]</span>
    person.emplace<span class="cppRainbow_lv1_p0">(</span><span class="Constant">&quot;B&quot;</span><span class="cppRainbow_lv1_o0">,</span> <span class="Constant">&quot;d&quot;</span><span class="cppRainbow_lv1_p0">)</span>;<span class="Comment">// [[C++11]]</span>
    person.insert_or_assign<span class="cppRainbow_lv1_p0">(</span><span class="Constant">&quot;B&quot;</span><span class="cppRainbow_lv1_o0">,</span> <span class="Constant">&quot;c&quot;</span><span class="cppRainbow_lv1_p0">)</span>;<span class="Comment">// あれば上書き[[C++17]]</span>
    person.try_emplace<span class="cppRainbow_lv1_p0">(</span><span class="Constant">&quot;B&quot;</span><span class="cppRainbow_lv1_o0">,</span> <span class="Constant">&quot;e&quot;</span><span class="cppRainbow_lv1_p0">)</span>;<span class="Comment">// [[C++17]] moveしない</span>
    print<span class="cppRainbow_lv1_p0">(</span>person<span class="cppRainbow_lv1_p0">)</span>;

    <span class="Comment">// 削除</span>
    person.erase<span class="cppRainbow_lv1_p0">(</span>person.find<span class="cppRainbow_lv2_p0">(</span><span class="Constant">&quot;age&quot;</span><span class="cppRainbow_lv2_p0">)</span><span class="cppRainbow_lv1_p0">)</span>;
    <span class="Statement">if</span><span class="cppRainbow_lv1_p0">(</span><span class="Constant">0</span><span class="cppRainbow_lv1_p0">)</span><span class="cppRainbow_lv1_p2">{</span>
        person.clear<span class="cppRainbow_lv2_p0">()</span>;<span class="Comment">// 全消去</span>
    <span class="cppRainbow_lv1_p2">}</span>
    <span class="Comment">// 要素数</span>
    cout &lt;&lt; <span class="Constant">&quot;size: &quot;</span> &lt;&lt; person.size<span class="cppRainbow_lv1_p0">()</span> &lt;&lt; endl;
    <span class="Comment">// キー存在確認</span>
    cout &lt;&lt; person.count<span class="cppRainbow_lv1_p0">(</span><span class="Constant">&quot;age&quot;</span><span class="cppRainbow_lv1_p0">)</span> &lt;&lt; endl;<span class="Comment">// 1 or 0 size_t</span>
    <span class="Comment">// 結合</span>
    map&lt;string<span class="cppRainbow_lv0_o2">,</span> <span class="Type">int</span>&gt; dict1<span class="cppRainbow_lv1_p2">{</span><span class="cppRainbow_lv2_p2">{</span><span class="Constant">&quot;a&quot;</span><span class="cppRainbow_lv2_o2">,</span> <span class="Constant">1</span><span class="cppRainbow_lv2_p2">}</span><span class="cppRainbow_lv1_o2">,</span> <span class="cppRainbow_lv2_p2">{</span><span class="Constant">&quot;b&quot;</span><span class="cppRainbow_lv2_o2">,</span> <span class="Constant">2</span><span class="cppRainbow_lv2_p2">}</span><span class="cppRainbow_lv1_p2">}</span>;
    map&lt;string<span class="cppRainbow_lv0_o2">,</span> <span class="Type">int</span>&gt; dict2<span class="cppRainbow_lv1_p2">{</span><span class="cppRainbow_lv2_p2">{</span><span class="Constant">&quot;a&quot;</span><span class="cppRainbow_lv2_o2">,</span> <span class="Constant">3</span><span class="cppRainbow_lv2_p2">}</span><span class="cppRainbow_lv1_o2">,</span> <span class="cppRainbow_lv2_p2">{</span><span class="Constant">&quot;d&quot;</span><span class="cppRainbow_lv2_o2">,</span> <span class="Constant">4</span><span class="cppRainbow_lv2_p2">}</span><span class="cppRainbow_lv1_p2">}</span>;
    dict1.merge<span class="cppRainbow_lv1_p0">(</span>dict2<span class="cppRainbow_lv1_p0">)</span>; <span class="Comment">// [[C++17]] 元々の方が優先</span>
    dict1.insert<span class="cppRainbow_lv1_p0">(</span>dict2.begin<span class="cppRainbow_lv2_p0">()</span><span class="cppRainbow_lv1_o0">,</span> dict2.end<span class="cppRainbow_lv2_p0">()</span><span class="cppRainbow_lv1_p0">)</span>; <span class="Comment">// [[C++17]]以前ならこれでもOK</span>
    print<span class="cppRainbow_lv1_p0">(</span>dict1<span class="cppRainbow_lv1_p0">)</span>;

    <span class="Comment">// 走査</span>
    <span class="Statement">for</span> <span class="cppRainbow_lv1_p0">(</span><span class="Type">const</span> <span class="Type">auto</span>&amp; <span class="cppRainbow_lv2_p1">[</span>key<span class="cppRainbow_lv2_o1">,</span> value<span class="cppRainbow_lv2_p1">]</span> : person<span class="cppRainbow_lv1_p0">)</span><span class="cppRainbow_lv1_p2">{</span><span class="Comment">// [[C++17]]</span>
        cout &lt;&lt; key &lt;&lt; <span class="Constant">&quot; is &quot;</span> &lt;&lt; value &lt;&lt; endl;
    <span class="cppRainbow_lv1_p2">}</span>
    <span class="Statement">for</span> <span class="cppRainbow_lv1_p0">(</span><span class="Type">auto</span> it = person.begin<span class="cppRainbow_lv2_p0">()</span>; it != person.end<span class="cppRainbow_lv2_p0">()</span>; it++<span class="cppRainbow_lv1_p0">)</span><span class="cppRainbow_lv1_p2">{</span>
        cout &lt;&lt; it-&gt;first &lt;&lt; <span class="Constant">&quot; is &quot;</span> &lt;&lt; it-&gt;second &lt;&lt; endl;
    <span class="cppRainbow_lv1_p2">}</span>


<span class="cppRainbow_lv0_p2">}</span>

<span class="Comment">// g++ helloworld.cpp -o helloworld(実行ファイル名)</span>
<span class="Comment">// clang++ helloworld.cpp -o helloworld</span>
<span class="Comment">//  --std=c++11フラグなどでC++のバージョンを指定できる</span>
</pre>
</body>
</html>
<!-- vim: set foldmethod=manual : -->
